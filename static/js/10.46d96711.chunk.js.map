{"version":3,"sources":["components/Review.js","resources/Frame5.png"],"names":["Review","props","id","name","data","setData","useState","clamped","setClamped","showButton","setShowButton","containerRef","useRef","api","API_MOVIE","API_TV","useEffect","async","axios","get","API_KEY","then","results","catch","error","console","getData","checkButtonAvailability","current","hadClampClass","classList","contains","add","el","clientHeight","scrollHeight","hasClamping","remove","_jsx","children","length","_jsxs","_Fragment","className","ref","map","dataRow","index","_dataRow$author_detai","LazyLoadImage","src","substring","effect","alt","author","onError","e","target","onerror","getDate","created_at","style","avg","ReadMoreReact","text","content","ideal","readMoreText","onClick","handleClick","FiChevronDown","FiChevronUp"],"mappings":"2LA0GeA,UAlGCC,IAEd,MAAM,GAAEC,EAAE,KAAEC,GAASF,GACdG,EAAMC,GAAWC,mBAAS,KAE1BC,EAASC,GAAcF,oBAAS,IAChCG,EAAYC,GAAiBJ,oBAAS,GAIvCK,EAAeC,iBAAO,MAI5B,IAAIC,EACJ,OAAQV,GACN,IAAK,QACHU,EAAMC,IACN,MAEF,IAAK,KACHD,EAAME,IAyCV,OAlCAC,qBAAU,KACQC,WACdC,IAAMC,IAAIN,EAAMX,EAAK,oBAAsBkB,KACxCC,MAAMjB,IACLC,EAAQD,EAAKA,KAAKkB,YAEnBC,OAAOC,IACNC,QAAQD,MAAMA,OAIpBE,GAOgCC,MAC9B,GAAIhB,EAAaiB,QAAS,CAExB,MAAMC,EAAgBlB,EAAaiB,QAAQE,UAAUC,SAAS,SAEzDF,GAAelB,EAAaiB,QAAQE,UAAUE,IAAI,SAEvDtB,EAZiBuB,KACnB,MAAM,aAAEC,EAAY,aAAEC,GAAiBF,EACvC,OAAOC,IAAiBC,GAURC,CAAYzB,EAAaiB,UAElCC,GAAelB,EAAaiB,QAAQE,UAAUO,OAAO,WAI9DV,KACC,CAACd,EAAKX,EAAIS,IAGX2B,cAAA,OAAAC,SACGnC,EAAKoC,OAAS,GACbC,eAAAC,WAAA,CAAAH,SAAA,CACED,cAAA,MAAIK,UAAU,oBAAmBJ,SAAC,YAClCD,cAAA,OAAKK,UAAWpC,EAAU,QAAU,YAAaqC,IAAKjC,EAAa4B,SAChEnC,EAAKyC,KAAI,CAACC,EAASC,KAAK,IAAAC,EAAA,OACvBV,cAAA,OAAAC,SACEE,eAAA,OAAKE,UAAU,WAAUJ,SAAA,CACvBD,cAAA,OAAKK,UAAU,0BAAyBJ,SACtCD,cAACW,gBAAa,CAAaN,UAAU,iBAAiBO,IAAKJ,EAAwB,eAAe,cAA6C,QAA5CE,EAAIF,EAAwB,eAAe,mBAAC,IAAAE,OAAA,EAAxCA,EAA0CG,UAAU,IAAIC,OAAO,UAAUC,IAAKP,EAAQQ,OAAQC,QAAUC,IAAQA,EAAEC,OAAOC,QAAU,KAAMF,EAAEC,OAAOP,IChF9P,uqCDgFyBH,KAEtBN,eAAA,OAAKE,UAAU,wBAAuBJ,SAAA,CACpCE,eAAA,MAAIE,UAAU,YAAWJ,SAAA,CAAC,eAAaO,EAAQQ,UAC/ChB,cAAA,OAAKK,UAAU,iBAAgBJ,SAAEoB,YAAQb,EAAQc,cACjDtB,cAAA,OAAKK,UAAU,OAAMJ,SAAEO,EAAwB,eAAU,OAAIR,cAAA,QAAMK,UAAU,QAAQkB,MAAO,CAAE,WAAYf,EAAwB,eAAU,QAAKgB,YAAIhB,EAAwB,eAAU,WAAgB,OACvMR,cAAA,OAAKK,UAAU,+BAA8BJ,SAC3CD,cAACyB,IAAa,CAACC,KAAMlB,EAAQmB,QAC3BC,MApEF,IAqEEC,aAAa,uBAZbpB,QAmBdT,cAAA,OAAKK,UAAU,mBAAkBJ,SAC9B9B,GACC6B,cAAA,UAAQK,UAAU,kCAAkCyB,QAlF5CC,IAAM7D,GAAYD,GAkF+CgC,SAAEhC,EAAU+B,cAACgC,IAAa,IAAMhC,cAACiC,IAAW","file":"static/js/10.46d96711.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { API_MOVIE, API_KEY, API_TV, getDate, avg } from '../constant';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport ReadMoreReact from 'read-more-react';\r\nimport axios from 'axios';\r\nimport frame5 from '../resources/Frame5.png'\r\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi';\r\n\r\nconst Review = (props) => {\r\n\r\n  const { id, name } = props;\r\n  const [data, setData] = useState([]);\r\n\r\n  const [clamped, setClamped] = useState(true);\r\n  const [showButton, setShowButton] = useState(true);\r\n\r\n  const handleClick = () => setClamped(!clamped);\r\n\r\n  const containerRef = useRef(null);\r\n\r\n  const idealLength = 200;\r\n\r\n  let api;\r\n  switch (name) {\r\n    case 'movie':\r\n      api = API_MOVIE;\r\n      break;\r\n\r\n    case 'tv':\r\n      api = API_TV;\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      axios.get(api + id + '/reviews?api_key=' + API_KEY)\r\n        .then((data) => {\r\n          setData(data.data.results)\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        })\r\n    }\r\n\r\n    getData();\r\n\r\n    const hasClamping = (el) => {\r\n      const { clientHeight, scrollHeight } = el;\r\n      return clientHeight !== scrollHeight;\r\n    };\r\n\r\n    const checkButtonAvailability = () => {\r\n      if (containerRef.current) {\r\n        // Save current state to reapply later if necessary.\r\n        const hadClampClass = containerRef.current.classList.contains(\"clamp\");\r\n        // Make sure that CSS clamping is applied if aplicable.\r\n        if (!hadClampClass) containerRef.current.classList.add(\"clamp\");\r\n        // Check for clamping and show or hide button accordingly.\r\n        setShowButton(hasClamping(containerRef.current));\r\n        // Sync clamping with local state.\r\n        if (!hadClampClass) containerRef.current.classList.remove(\"clamp\");\r\n      }\r\n    };\r\n\r\n    checkButtonAvailability();\r\n  }, [api, id, containerRef]);\r\n\r\n  return (\r\n    <div>\r\n      {data.length > 0 &&\r\n        <>\r\n          <h2 className=\"mt-5 fw-bold mb-3\">REVIEWS</h2>\r\n          <div className={clamped ? \"clamp\" : \"long-text\"} ref={containerRef}>\r\n            {data.map((dataRow, index) => (\r\n              <div key={index}>\r\n                <div className=\"row mb-5\">\r\n                  <div className=\"col-lg-auto col-12 mt-3\">\r\n                    <LazyLoadImage key={index} className=\"rounded-circle\" src={dataRow['author_details']['avatar_path'] && dataRow['author_details']['avatar_path']?.substring(1)} effect=\"opacity\" alt={dataRow.author} onError={(e) => { e.target.onerror = null; e.target.src = frame5 }} />\r\n                  </div>\r\n                  <div className=\"col-lg-10 col-12 mt-3\">\r\n                    <h5 className=\"text-bold\">A review by {dataRow.author}</h5>\r\n                    <div className=\"text-secondary\">{getDate(dataRow.created_at)}</div>\r\n                    <div className='mt-1'>{dataRow['author_details']['rating'] ? <span className=\"stars\" style={{ '--rating': dataRow['author_details']['rating'] && avg(dataRow['author_details']['rating']) }}></span> : null}</div>\r\n                    <div className=\"mt-3 text-preline text-muted\">\r\n                      <ReadMoreReact text={dataRow.content}\r\n                        ideal={idealLength}\r\n                        readMoreText=\"Read more\" />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className='text-center mt-4'>\r\n            {showButton && (\r\n              <button className='btn btn-outline-dark text-light' onClick={handleClick}>{clamped ? <FiChevronDown /> : <FiChevronUp />}</button>\r\n            )}\r\n          </div>\r\n        </>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Review\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAL9SURBVHgB7ZtNTxNhFIXvQPkSbQ3r8gcKP0BwbWGtAfYQ4tIQ4hqIa+AHEOKe4J6PPVXXbXFfGhPjpq2CpbTac8sMTSMEPaOr8ySTvnPf+05mnp6ZdjNBuVz+aeKv6TNBIYEkEkgigSQSSCKBJBJIIoEkEkgigSQSSCKBJBJIIoEkEkgigSQSSCKBJBJIIoEkEkgigSQSSCKBJBJIIoEkEkgigSQSSCKBJBJIIoEkEkgigSQSSCKBJLEILJVKls1mrVqtRrW1tTXb2dm59zGwdmVl5d79I9+Pbbi93bbfy+Mvr+1fEFsCK5VKJAxCDw4OIqH43Nvb8xrmQKFQiNbm83lfPzc3F9XQ290fHuPk5MT3g1bV+po3X1j3fqJe7Fxcu9bfOOvUGmUbvHhvI7V3US0OYhM4PT1tuVzOL3Rra8tWV1ejucXFRRcUpqw7bRCEftTW19e9hvQWi0ULgsCWlpaiY6RSKTs6Oork91+duRRsA9fSUHtYeevjRP3UHrSFdcZFG7r4YM1E2tMIuXGQsBiZmZnxFCaTSUun0y4HiRkfH7fl5WXvgUgkC70Qjp7Z2VmbmJjwdeDw8NCmpqZ8Dv34xBySmslkvNdqnyJpAKlqDGZuPberoYzVxl75uD76zIa/Hdt58oWxxCpwYWHBk7KxseEXDiAvHAMka35+3uvhLYr+biBre3vbx5CG5CHRqO/u7vq650/NfoxmIwmetDteGQpaN+eQuDy180e8PD+WxQgucH9/38fhswqiJicn/ZYNE4Z0gc3NTa+hpxsIDvuxQR5ua6yD0M5t/fG354BbFGkc+/zSmgNpa/Ulr2cCS31946NEe/5y5InFQfC/XvXCMw5J7JX1J/1IK9IYfhF3AYkQ2A2ee0H7h6a3zhDoXTkO/ZEmkUASCSSRQBIJJJFAEgkkkUASCSSRQBIJJJFAEgkkkUASCSSRQBIJJJFAEgkkkUASCSSRQBIJJJFAEgkkkUASCSSRQBIJJJFAEgkkkUASCSSRQBIJJPkF0hE0Fe+oOk4AAAAASUVORK5CYII=\""],"sourceRoot":""}